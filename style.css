/* style.css — Unified roster + optimizer styling (uniform cards + side pills) */

:root{
  --bg:#0b0d12;
  --panel:#121522;
  --panel2:#0f1220;
  --text:#e9ecff;
  --muted:#aab1d6;
  --line:rgba(255,255,255,.08);
  --chip:rgba(255,255,255,.10);
  --chip2:rgba(255,255,255,.16);
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
.hidden{display:none!important}

/* Top bar */
.topbar{position:sticky;top:0;z-index:10;background:rgba(11,13,18,.92);backdrop-filter:blur(10px);border-bottom:1px solid var(--line);padding:10px 12px}
.topbar-inner{display:flex;align-items:center;justify-content:space-between;gap:12px;max-width:1150px;margin:0 auto}
.brandTitle{font-weight:900;letter-spacing:.2px}
.brandSub{font-size:12px;color:var(--muted);margin-top:2px}
.tabs{display:flex;gap:8px}
.tab{border:1px solid var(--line);background:var(--panel2);color:var(--text);padding:8px 10px;border-radius:10px;font-weight:900;cursor:pointer;text-decoration:none}
.tab.active{background:var(--panel);border-color:rgba(255,255,255,.18)}
.page{padding:14px 12px 40px;max-width:1150px;margin:0 auto}

/* Controls */
.controls{display:flex;flex-wrap:wrap;gap:10px;padding:10px;border:1px solid var(--line);background:var(--panel);border-radius:12px;margin-bottom:14px}
.input{background:var(--panel2);border:1px solid var(--line);color:var(--text);border-radius:10px;padding:10px 12px;min-height:40px;outline:none}
.btn{border:1px solid var(--line);background:var(--panel2);color:var(--text);padding:10px 12px;border-radius:10px;font-weight:900;cursor:pointer}
.btn:active{transform:translateY(1px)}
#statusText{color:var(--muted);font-size:13px;margin:6px 0 10px}
.footerHint{color:var(--muted);font-size:13px;margin-top:14px}

/* Panels */
.panel{border:1px solid var(--line);background:var(--panel);border-radius:14px;padding:12px;margin-top:10px}
.panelTitle{font-weight:900;margin-bottom:6px}
.muted{color:var(--muted);font-size:13px}
.skillText{white-space:normal;line-height:1.25}
.skillLine{margin:8px 0}

/* =========================================================
   GRIDS
   ========================================================= */
.rosterGrid{display:grid;gap:12px}

/* Default grid (desktop/tablet baseline) */
#unitGrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
#catalogGrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
@media (min-width:700px){
  #unitGrid{grid-template-columns:repeat(3,minmax(0,1fr))}
  #catalogGrid{grid-template-columns:repeat(3,minmax(0,1fr))}
}
@media (min-width:1000px){
  #unitGrid{grid-template-columns:repeat(4,minmax(0,1fr))}
  #catalogGrid{grid-template-columns:repeat(4,minmax(0,1fr))}
}

/* =========================================================
   VIEW MODES (COMPACT vs DETAILED)
   ========================================================= */

/* Detailed = single column list */
body.mobile-detailed #unitGrid,
body.mobile-detailed #catalogGrid{
  grid-template-columns:1fr!important;
  gap:12px!important;
}

/* Compact = responsive tiles */
body.mobile-compact #unitGrid,
body.mobile-compact #catalogGrid{
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr))!important;
  gap:12px!important;
}

/* Panels: detailed shows all; compact hides heavy panels (skills/passives) */
body.mobile-detailed .unitDetails{display:block!important}
body.mobile-detailed .unitDetails .panel{display:block!important}
body.mobile-compact .unitDetails{display:block!important}
body.mobile-compact .unitDetails .panel{display:none!important}

/* =========================================================
   UNIT CARD — UNIFORM LAYOUT
   Desired structure:
   [portrait | name + pills-right]
   [stats]
   [leader skill]
   ========================================================= */

.unitCard{
  border:1px solid var(--line);
  background:var(--panel);
  border-radius:14px;
  padding:12px;
  display:grid;
  grid-template-columns:110px 1fr; /* portrait left */
  gap:12px;
  align-items:start;
  overflow:hidden;
  min-width:0;
}

/* Portrait: show FACE better */
.unitThumb{
  width:110px;
  height:110px;
  border-radius:12px;
  overflow:hidden;
  background:rgba(255,255,255,.06);
  display:grid;
  place-items:center;
}
.unitThumb img{
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:50% 18%; /* bias upward so faces show */
  display:block;
}
.unitThumb .ph{width:100%;height:100%;display:grid;place-items:center;font-weight:900;font-size:28px}

.meta{
  display:grid;
  grid-template-rows:auto auto auto;
  gap:8px;
  min-width:0;
}

/* Header row: name left, pills fixed on right */
.topRow{
  display:grid;
  grid-template-columns:1fr 96px; /* right column for pills */
  gap:10px;
  align-items:start;
}

/* Name/title area */
.unitName{
  font-weight:900;
  line-height:1.15;
  font-size:16px;
  overflow-wrap:anywhere;
  word-break:break-word;
}
.unitTitle,.unitSub{
  font-size:13px;
  color:var(--muted);
  margin-top:2px;
  line-height:1.2;
  overflow-wrap:anywhere;
  word-break:break-word;
}

/* Pills column (right side) */
.tags{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
  gap:6px;
  justify-content:flex-start;
}
.tag{
  font-size:12px;
  padding:5px 10px;
  border-radius:999px;
  background:var(--chip);
  border:1px solid var(--line);
  white-space:nowrap;
  max-width:96px;
  overflow:hidden;
  text-overflow:ellipsis;
}
.tag.rarity{
  background:var(--chip2);
  font-weight:900;
  font-size:11px;              /* smaller */
  padding:4px 9px;
}
.tag.element{
  color:var(--text);
  font-weight:900;
  font-size:12px;              /* larger than rarity */
  padding:6px 10px;
}

/* Stats directly under header area */
.unitDetails{display:block}
.statLine{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  font-weight:900;
  letter-spacing:.2px;
  padding-top:2px;
}
.stat{font-size:13px}
.stat strong{font-weight:900}

/* Leader always visible and under stats */
.leaderBlock{
  border-top:1px solid var(--line);
  padding-top:8px;
  display:block!important;
  visibility:visible!important;
  opacity:1!important;
}
.leaderName{font-weight:900;font-size:13px}
.leaderDesc{
  color:var(--muted);
  font-size:13px;
  margin-top:2px;
  line-height:1.25;
  overflow-wrap:anywhere;
  word-break:break-word;
}

/* Owned row */
.ownedRow{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  background:rgba(255,255,255,.04);
  border:1px solid var(--line);
  border-radius:12px;
  font-weight:900;
}
.ownedCheck{width:18px;height:18px}

/* Compact mode: keep uniform tiles, smaller portrait, still side pills */
body.mobile-compact .unitCard{
  grid-template-columns:92px 1fr;
  gap:10px;
  padding:10px;
}
body.mobile-compact .unitThumb{
  width:92px;
  height:92px;
  border-radius:12px;
}
body.mobile-compact .topRow{
  grid-template-columns:1fr 92px;
}

/* =========================================================
   OPTIMIZER: SLOT BOXES + GRIDS (unchanged)
   ========================================================= */
.optHeader{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:10px}
.platoonTools{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.teamBlock{margin-top:10px}
.teamSubTitle{font-weight:900;margin:8px 0 6px}

.slotGrid{display:grid;gap:10px;margin-top:8px;grid-template-columns:repeat(5,minmax(0,1fr))}
.storyBackGrid{grid-template-columns:repeat(3,minmax(0,1fr))}

.platoonsGrid{display:grid;gap:12px;margin-top:10px;grid-template-columns:repeat(2,minmax(0,1fr))}
@media (min-width:900px){.platoonsGrid{grid-template-columns:repeat(3,minmax(0,1fr))}}

.grid{display:grid;gap:10px;margin-top:10px;grid-template-columns:repeat(2,minmax(0,1fr))}
@media (min-width:700px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
@media (min-width:1000px){.grid{grid-template-columns:repeat(4,minmax(0,1fr))}}

.slotCard{
  border:1px solid var(--line);
  background:var(--panel2);
  border-radius:12px;
  padding:10px;
  min-height:96px;
  display:grid;
  gap:8px;
  align-content:start;
  min-width:0;
}
.slotTop{display:grid;grid-template-columns:56px 1fr;gap:10px;align-items:center;min-width:0}
.slotImg{width:56px;height:56px;border-radius:10px;overflow:hidden;background:rgba(255,255,255,.06);display:grid;place-items:center}
.slotImg img{width:100%;height:100%;object-fit:cover;display:block}
.slotImg .ph{font-weight:900}
.slotName{font-weight:900;line-height:1.15;font-size:13px;overflow-wrap:anywhere;word-break:break-word}
.slotSub{color:var(--muted);font-size:12px;margin-top:2px;line-height:1.2;overflow-wrap:anywhere;word-break:break-word}
.slotMetaRow{display:flex;flex-wrap:wrap;gap:6px;align-items:center}
.slotChip{font-size:11px;padding:3px 7px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.06);white-space:nowrap}
.slotSelect{width:100%;background:rgba(255,255,255,.06);border:1px solid var(--line);color:var(--text);border-radius:10px;padding:8px 10px;outline:none}

/* =========================================================
   MOBILE TUNING
   ========================================================= */
@media (max-width:900px){
  /* Compact grids: 3 per row */
  body.mobile-compact #unitGrid,
  body.mobile-compact #catalogGrid{
    grid-template-columns:repeat(3,minmax(0,1fr))!important;
    gap:10px!important;
  }

  /* Detailed cards on mobile: keep portrait visible but not huge */
  body.mobile-detailed .unitCard{
    grid-template-columns:1fr!important;
    padding:10px!important;
    gap:10px!important;
  }
  body.mobile-detailed .unitThumb{
    width:100%!important;
    height:140px!important;
    border-radius:12px!important;
  }
  body.mobile-detailed .unitThumb img{
    object-position:50% 18%!important;
  }
  body.mobile-detailed .topRow{
    grid-template-columns:1fr 96px!important;
  }
  body.mobile-detailed .tags{
    align-items:flex-end!important;
  }

  /* Optimizer grids on small screens */
  .slotGrid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .storyBackGrid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .platoonsGrid{grid-template-columns:1fr}
  .grid{grid-template-columns:repeat(2,minmax(0,1fr))}
}