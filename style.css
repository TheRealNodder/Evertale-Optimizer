/* style.css — Unified roster + optimizer styling */

:root{
  --bg:#0b0d12;
  --panel:#121522;
  --panel2:#0f1220;
  --text:#e9ecff;
  --muted:#aab1d6;
  --line:rgba(255,255,255,.08);
  --chip:rgba(255,255,255,.10);
  --chip2:rgba(255,255,255,.16);
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
.hidden{display:none!important}

/* Top bar */
.topbar{position:sticky;top:0;z-index:10;background:rgba(11,13,18,.92);backdrop-filter:blur(10px);border-bottom:1px solid var(--line);padding:10px 12px}
.topbar-inner{display:flex;align-items:center;justify-content:space-between;gap:12px;max-width:1150px;margin:0 auto}
.brandTitle{font-weight:900;letter-spacing:.2px}
.brandSub{font-size:12px;color:var(--muted);margin-top:2px}
.tabs{display:flex;gap:8px}
.tab{border:1px solid var(--line);background:var(--panel2);color:var(--text);padding:8px 10px;border-radius:10px;font-weight:900;cursor:pointer;text-decoration:none}
.tab.active{background:var(--panel);border-color:rgba(255,255,255,.18)}
.page{padding:14px 12px 40px;max-width:1150px;margin:0 auto}

/* Controls */
.controls{display:flex;flex-wrap:wrap;gap:10px;padding:10px;border:1px solid var(--line);background:var(--panel);border-radius:12px;margin-bottom:14px}
.input{background:var(--panel2);border:1px solid var(--line);color:var(--text);border-radius:10px;padding:10px 12px;min-height:40px;outline:none}
.btn{border:1px solid var(--line);background:var(--panel2);color:var(--text);padding:10px 12px;border-radius:10px;font-weight:900;cursor:pointer}
.btn:active{transform:translateY(1px)}
#statusText{color:var(--muted);font-size:13px;margin:6px 0 10px}
.footerHint{color:var(--muted);font-size:13px;margin-top:14px}

/* Panels */
.panel{border:1px solid var(--line);background:var(--panel);border-radius:14px;padding:12px;margin-top:10px}
.panelTitle{font-weight:900;margin-bottom:6px}
.muted{color:var(--muted);font-size:13px}
.skillText{white-space:normal;line-height:1.25}
.skillLine{margin:8px 0}

/* =========================================================
   ROSTER GRID + VIEW MODES
   ========================================================= */
.rosterGrid{display:grid;gap:12px}

/* Default grid (desktop/tablet baseline) */
#unitGrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
#catalogGrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
@media (min-width:700px){#unitGrid{grid-template-columns:repeat(3,minmax(0,1fr))}#catalogGrid{grid-template-columns:repeat(3,minmax(0,1fr))}}
@media (min-width:1000px){#unitGrid{grid-template-columns:repeat(4,minmax(0,1fr))}#catalogGrid{grid-template-columns:repeat(4,minmax(0,1fr))}}

/* =========================================================
   VIEW MODES (COMPACT vs DETAILED)
   - Works on desktop + mobile
   - Compact keeps stats + leader visible; hides heavy panels (skills/passives)
   ========================================================= */

/* Desktop + all sizes: make toggle actually change layout */
body.mobile-detailed #unitGrid,
body.mobile-detailed #catalogGrid{
  grid-template-columns:1fr!important;
  gap:12px!important;
}
body.mobile-compact #unitGrid,
body.mobile-compact #catalogGrid{
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr))!important;
  gap:12px!important;
}

/* Panels: detailed shows, compact hides */
body.mobile-detailed .unitDetails{display:block!important}
body.mobile-detailed .unitDetails .panel{display:block!important}
body.mobile-compact .unitDetails{display:block!important}
body.mobile-compact .unitDetails .panel{display:none!important}

/* Mobile tuning */
@media (max-width:900px){
  /* Compact = 3 per row on phones/tablets */
  body.mobile-compact #unitGrid,
  body.mobile-compact #catalogGrid{
    grid-template-columns:repeat(3,minmax(0,1fr))!important;
    gap:10px!important;
  }
}

 /* =========================================================
   ROSTER CARD
   ========================================================= */
.unitCard{
  border:1px solid var(--line);
  background:var(--panel);
  border-radius:14px;
  padding:12px;
  display:grid;
  grid-template-columns:88px 1fr;
  gap:12px;
  align-items:start;
  overflow:hidden;
  min-width:0;
}
.unitThumb{width:88px;height:88px;border-radius:12px;overflow:hidden;background:rgba(255,255,255,.06);display:grid;place-items:center}
.unitThumb img{width:100%;height:100%;object-fit:cover;object-position:center top;display:block}
.unitThumb .ph{width:100%;height:100%;display:grid;place-items:center;font-weight:900;font-size:28px}
.meta{display:flex;flex-direction:column;gap:8px;min-width:0}
.topRow{display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
/* New, more uniform header: name on left, fixed chip column on right */
.metaHeader{display:grid;grid-template-columns:1fr auto;gap:10px;align-items:start}
.nameBlock{min-width:0}
.chipCol{display:flex;flex-direction:column;gap:6px;align-items:flex-end;flex:0 0 auto}
.chipCol .tag{white-space:nowrap}
.unitName{font-weight:900;line-height:1.15;font-size:16px;overflow-wrap:break-word;word-break:normal}
.unitTitle,.unitSub{font-size:13px;color:var(--muted);margin-top:2px;line-height:1.2;overflow-wrap:break-word;word-break:normal}
.tags{display:flex;flex-direction:row;gap:6px;flex-wrap:wrap;align-items:center;justify-content:flex-end;min-width:0}
/* If older markup uses .tags, keep bubbles pinned to the right */
.topRow .tags{flex-direction:row;align-items:center;justify-content:flex-end}

/* Image state buttons (1/2/3) */
.stateRow{display:flex;gap:6px;align-items:center;justify-content:flex-end;flex-wrap:nowrap;margin-top:6px}
.stateRow .stateBtn{border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:var(--text);
  border-radius:10px;padding:4px 8px;font-size:12px;line-height:1;cursor:pointer}
.stateRow .stateBtn.active{background:rgba(255,255,255,.18)}
.unitDetails{display:block}
.statLine{display:flex;flex-wrap:wrap;gap:10px;font-weight:800;letter-spacing:.2px}
.stat{font-size:13px}
.stat strong{font-weight:900}

/* Leader always visible */
.leaderBlock{border-top:1px solid var(--line);padding-top:8px;display:block!important;visibility:visible!important;opacity:1!important}
.leaderName{font-weight:900;font-size:13px}
.leaderDesc{color:var(--muted);font-size:13px;margin-top:2px;line-height:1.25;overflow-wrap:break-word;word-break:normal}

.ownedRow{display:flex;align-items:center;gap:8px;padding:8px 10px;background:rgba(255,255,255,.04);border:1px solid var(--line);border-radius:12px;font-weight:900}
.ownedCheck{width:18px;height:18px}

/* Compact card tweak (general) */
body.mobile-compact .unitCard{grid-template-columns:72px 1fr;gap:10px;padding:10px}
body.mobile-compact .unitThumb{width:72px;height:72px;border-radius:10px}

/* =========================================================
   OPTIMIZER: SLOT BOXES + GRIDS
   ========================================================= */
.optHeader{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;margin-bottom:10px}
.platoonTools{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.teamBlock{margin-top:10px}
.teamSubTitle{font-weight:900;margin:8px 0 6px}

/* Story grids */
.slotGrid{display:grid;gap:10px;margin-top:8px;grid-template-columns:repeat(5,minmax(0,1fr))}
.storyBackGrid{grid-template-columns:repeat(3,minmax(0,1fr))}

/* Platoons container */
.platoonsGrid{display:grid;gap:12px;margin-top:10px;grid-template-columns:repeat(2,minmax(0,1fr))}
@media (min-width:900px){.platoonsGrid{grid-template-columns:repeat(3,minmax(0,1fr))}}

/* Storage grid */
.grid{display:grid;gap:10px;margin-top:10px;grid-template-columns:repeat(2,minmax(0,1fr))}
@media (min-width:700px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
@media (min-width:1000px){.grid{grid-template-columns:repeat(4,minmax(0,1fr))}}

.slotCard{
  border:1px solid var(--line);
  background:var(--panel2);
  border-radius:12px;
  padding:10px;
  min-height:96px;
  display:grid;
  gap:8px;
  align-content:start;
  min-width:0;
}
.slotTop{display:grid;grid-template-columns:56px 1fr;gap:10px;align-items:center;min-width:0}
.slotImg{width:56px;height:56px;border-radius:10px;overflow:hidden;background:rgba(255,255,255,.06);display:grid;place-items:center}
.slotImg img{width:100%;height:100%;object-fit:cover;display:block}
.slotImg .ph{font-weight:900}
.slotName{font-weight:900;line-height:1.15;font-size:13px;overflow-wrap:break-word;word-break:normal}
.slotSub{color:var(--muted);font-size:12px;margin-top:2px;line-height:1.2;overflow-wrap:break-word;word-break:normal}
.slotMetaRow{display:flex;flex-wrap:wrap;gap:6px;align-items:center}
.slotChip{font-size:11px;padding:3px 7px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,.06);white-space:nowrap}
.slotSelect{width:100%;background:rgba(255,255,255,.06);border:1px solid var(--line);color:var(--text);border-radius:10px;padding:8px 10px;outline:none}

/* =========================================================
   MOBILE (<=900px): compact card layout + optimizer grids
   ========================================================= */
@media (max-width:900px){
  /* Detailed cards (full view) — avoid ultra-narrow text columns */
  body.mobile-detailed .unitCard{
    grid-template-columns:1fr!important;
    padding:10px!important;
    gap:10px!important;
  }
  body.mobile-detailed .unitThumb{
    width:100%!important;
    height:120px!important;
    border-radius:12px!important;
  }
  body.mobile-detailed .topRow{
    flex-direction:column!important;
    align-items:flex-start!important;
    justify-content:flex-start!important;
    gap:6px!important;
  }
  body.mobile-detailed .tags{justify-content:flex-start!important}
  body.mobile-detailed .unitName{
    white-space:normal!important;
    overflow:visible!important;
    text-overflow:clip!important;
  }
  body.mobile-detailed .unitTitle{display:block!important}


  /* Compact cards (image on top + truncate) */
  body.mobile-compact .unitCard{
    grid-template-columns:1fr!important;
    padding:8px!important;
    gap:8px!important;
    border-radius:12px!important;
  }

  body.mobile-compact .unitThumb{
    width:100%!important;
    height:108px!important; /* bigger face crop */
    border-radius:10px!important;
  }

  body.mobile-compact .topRow{
    flex-direction:column!important;
    align-items:flex-start!important;
    justify-content:flex-start!important;
    gap:6px!important;
  }

  body.mobile-compact .tags{justify-content:flex-start!important}

  body.mobile-compact .unitName{
    font-size:13px!important;
    line-height:1.1!important;
    white-space:nowrap!important;
    overflow:hidden!important;
    text-overflow:ellipsis!important;
    max-width:100%!important;
  }

  body.mobile-compact .unitTitle{display:none!important}

  body.mobile-compact .ownedRow{padding:6px 8px!important;justify-content:center!important}
  body.mobile-compact .ownedRow span{display:none!important}

  /* Optimizer grids on small screens */
  .slotGrid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .storyBackGrid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .platoonsGrid{grid-template-columns:1fr}
  .grid{grid-template-columns:repeat(2,minmax(0,1fr))}


  /* Keep title visible in compact; truncate to 1 line */
  body.mobile-compact .unitTitle{
    display:block!important;
    font-size:12px!important;
    line-height:1.15!important;
    white-space:nowrap!important;
    overflow:hidden!important;
    text-overflow:ellipsis!important;
    max-width:100%!important;
    opacity:.9;
  }

}}
/* =========================================================
   OPTIMIZER: ELEMENT COLOR CODING (PLACED UNITS)
   Guard rails:
   - Purely presentational (CSS only)
   - Driven by slotCard having class el-fire/el-water/... added by optimizer.js
   ========================================================= */
:root{
  --el-fire:#ff3b3b;
  --el-water:#2f8bff;
  --el-storm:#ffd84a;
  --el-earth:#41d26b;
  --el-light:#f4f6ff;
  --el-dark:#a855f7;
}

/* Optional: subtle modernized page background (safe override) */
body{
  background:
    radial-gradient(1200px 700px at 20% 0%, rgba(84,110,255,0.22), transparent 55%),
    radial-gradient(900px 600px at 80% 10%, rgba(168,85,247,0.16), transparent 60%),
    var(--bg);
}

.slotCard{
  position:relative; /* needed for the color rail */
  overflow:hidden;
}

/* Set --el by element */
.slotCard.el-fire  { --el:var(--el-fire); }
.slotCard.el-water { --el:var(--el-water); }
.slotCard.el-storm { --el:var(--el-storm); }
.slotCard.el-earth { --el:var(--el-earth); }
.slotCard.el-light { --el:var(--el-light); }
.slotCard.el-dark  { --el:var(--el-dark); }

/* Color rail */
.slotCard[class*="el-"]::before{
  content:"";
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:8px;
  background:var(--el);
  box-shadow:inset 0 0 0 1px rgba(0,0,0,0.25);
}

/* Tint + border */
.slotCard[class*="el-"]{
  border-color: color-mix(in srgb, var(--el) 55%, var(--line));
  background: linear-gradient(
    180deg,
    color-mix(in srgb, var(--el) 10%, var(--panel2)),
    var(--panel2)
  );
}

/* Ensure readable text for Light */
.slotCard.el-light{ color: rgba(10,12,20,0.92); }
.slotCard.el-light .slotSub,
.slotCard.el-light .muted{ color: rgba(10,12,20,0.68); }
.slotCard.el-light .slotChip{
  background: rgba(255,255,255,0.55);
  border-color: rgba(10,12,20,0.15);
  color: rgba(10,12,20,0.85);
}


/* ===== Element accents for roster (mobile/desktop) without changing owned logic ===== */
.unitCard.el-fire  { border-left: 6px solid var(--el-fire);  }
.unitCard.el-water { border-left: 6px solid var(--el-water); }
.unitCard.el-storm { border-left: 6px solid var(--el-storm); }
.unitCard.el-earth { border-left: 6px solid var(--el-earth); }
.unitCard.el-light { border-left: 6px solid var(--el-light); }
.unitCard.el-dark  { border-left: 6px solid var(--el-dark);  }

.unitCard.el-fire  .ownedRow{ border-color: color-mix(in srgb, var(--el-fire) 55%, var(--line)); }
.unitCard.el-water .ownedRow{ border-color: color-mix(in srgb, var(--el-water) 55%, var(--line)); }
.unitCard.el-storm .ownedRow{ border-color: color-mix(in srgb, var(--el-storm) 55%, var(--line)); }
.unitCard.el-earth .ownedRow{ border-color: color-mix(in srgb, var(--el-earth) 55%, var(--line)); }
.unitCard.el-light .ownedRow{ border-color: color-mix(in srgb, var(--el-light) 55%, var(--line)); }
.unitCard.el-dark  .ownedRow{ border-color: color-mix(in srgb, var(--el-dark) 55%, var(--line)); }

/* Mobile compact: keep the checkbox row visually tied to element color */
@media (max-width: 560px){
  body.mobile-compact .unitCard.el-fire  .ownedRow{ box-shadow: 0 0 0 2px color-mix(in srgb, var(--el-fire) 28%, transparent); }
  body.mobile-compact .unitCard.el-water .ownedRow{ box-shadow: 0 0 0 2px color-mix(in srgb, var(--el-water) 28%, transparent); }
  body.mobile-compact .unitCard.el-storm .ownedRow{ box-shadow: 0 0 0 2px color-mix(in srgb, var(--el-storm) 28%, transparent); }
  body.mobile-compact .unitCard.el-earth .ownedRow{ box-shadow: 0 0 0 2px color-mix(in srgb, var(--el-earth) 28%, transparent); }
  body.mobile-compact .unitCard.el-light .ownedRow{ box-shadow: 0 0 0 2px color-mix(in srgb, var(--el-light) 28%, transparent); }
  body.mobile-compact .unitCard.el-dark  .ownedRow{ box-shadow: 0 0 0 2px color-mix(in srgb, var(--el-dark) 28%, transparent); }
}
